{"version":3,"sources":["use-map-animate-to-style.ts"],"names":["debug","args","isColor","styleKey","includes","isTransform","transforms","animationDelay","key","transition","defaultDelay","delayMs","delay","animationConfig","styleProp","repeatCount","repeatReverse","animationType","type","loop","repeat","config","animation","props","duration","easing","withTiming","withSpring","configKeys","forEach","configKey","styleSpecificConfig","transitionConfigForKey","console","error","PackageName","withDecay","velocity","deceleration","shouldRepeat","useMapAnimateToStyle","animate","from","transitionProp","state","stylePriority","onDidAnimate","exit","animateInitialState","exitTransition","isMounted","isPresent","safeToUnmount","reanimatedSafeToUnmount","reanimatedOnDidAnimated","hasExitStyle","Object","keys","length","style","final","transform","variantStyle","__state","value","animateStyle","initialStyle","exitStyle","isExiting","mergedStyles","assign","exitingStyleProps","initialValue","callback","completed","recentValue","attempedValue","areStylesExiting","values","some","Boolean","push","startsWith","Array","isArray","sequence","filter","step","map","stepDelay","stepValue","stepConfig","stepAnimation","inlineStepConfig","sequenceValue","slice","finalValue","innerStyleKey","allowUnMountIfMissingExit"],"mappings":"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","sourcesContent":["import { usePresence } from 'framer-motion'\nimport { useCallback, useEffect } from 'react'\nimport type { TransformsStyle } from 'react-native'\nimport Animated, {\n  useAnimatedStyle,\n  useSharedValue,\n  withDecay,\n  withSpring,\n  withTiming,\n  withDelay,\n  withRepeat,\n  withSequence,\n  runOnJS,\n} from 'react-native-reanimated'\nimport { PackageName } from './constants/package-name'\nimport type { MotiProps, Transforms, TransitionConfig } from './types'\n\nconst debug = (...args: any[]) => {\n  'worklet'\n  if (args) {\n    // hi\n  }\n  // console.log('[moti]', ...args)\n}\n\nconst isColor = (styleKey: string) => {\n  'worklet'\n  return [\n    'backgroundColor',\n    'borderBottomColor',\n    'borderColor',\n    'borderEndColor',\n    'borderLeftColor',\n    'borderRightColor',\n    'borderStartColor',\n    'borderTopColor',\n    'color',\n  ].includes(styleKey)\n}\n\nconst isTransform = (styleKey: string) => {\n  'worklet'\n  const transforms: (keyof Transforms)[] = [\n    'perspective',\n    'rotate',\n    'rotateX',\n    'rotateY',\n    'rotateZ',\n    'scale',\n    'scaleX',\n    'scaleY',\n    'translateX',\n    'translateY',\n    'skewX',\n    'skewY',\n  ]\n  return transforms.includes(styleKey as keyof Transforms)\n}\n\nfunction animationDelay<Animate>(\n  key: string,\n  transition: MotiProps<Animate>['transition'],\n  defaultDelay?: number\n) {\n  'worklet'\n  let delayMs: TransitionConfig['delay'] = defaultDelay\n\n  if ((transition as any)?.[key as keyof Animate]?.delay != null) {\n    delayMs = (transition as any)?.[key as keyof Animate]?.delay\n  } else if (transition?.delay != null) {\n    delayMs = transition.delay\n  }\n\n  return {\n    delayMs,\n  }\n}\n\nfunction animationConfig<Animate>(\n  styleProp: string,\n  transition: MotiProps<Animate>['transition']\n) {\n  'worklet'\n\n  const key = styleProp\n  let repeatCount = 0\n  let repeatReverse = true\n\n  let animationType: Required<TransitionConfig>['type'] = 'spring'\n  if (isColor(key) || key === 'opacity') animationType = 'timing'\n\n  // say that we're looking at `width`\n  // first, check if we have transition.width.type\n  if ((transition as any)?.[key as keyof Animate]?.type) {\n    animationType = (transition as any)[key]?.type\n  } else if (transition?.type) {\n    // otherwise, fallback to transition.type\n    animationType = transition.type\n  }\n\n  const loop =\n    (transition as any)?.[key as keyof Animate]?.loop ?? transition?.loop\n\n  if (loop != null) {\n    repeatCount = loop ? -1 : 0\n  }\n\n  if ((transition as any)?.[key as keyof Animate]?.repeat != null) {\n    repeatCount = (transition as any)?.[key as keyof Animate]?.repeat\n  } else if (transition?.repeat != null) {\n    repeatCount = transition.repeat\n  }\n\n  if ((transition as any)?.[key as keyof Animate]?.repeatReverse != null) {\n    repeatReverse = (transition as any)?.[key as keyof Animate]?.repeatReverse\n  } else if (transition?.repeatReverse != null) {\n    repeatReverse = transition.repeatReverse\n  }\n\n  debug({ loop, key, repeatCount, animationType })\n\n  let config = {}\n  // so sad, but fix it later :(\n  let animation = (...props: any): any => props\n\n  if (animationType === 'timing') {\n    const duration =\n      ((transition as any)?.[key as keyof Animate] as Animated.WithTimingConfig)\n        ?.duration ?? (transition as Animated.WithTimingConfig)?.duration\n\n    const easing =\n      ((transition as any)?.[key as keyof Animate] as Animated.WithTimingConfig)\n        ?.easing ?? (transition as Animated.WithTimingConfig)?.easing\n\n    if (easing) {\n      config['easing'] = easing\n    }\n    if (duration != null) {\n      config['duration'] = duration\n    }\n    animation = withTiming\n  } else if (animationType === 'spring') {\n    animation = withSpring\n    config = {\n      // solve the missing velocity bug in 2.0.0-rc.0\n      // velocity: 2,\n    } as Animated.WithSpringConfig\n    const configKeys: (keyof Animated.WithSpringConfig)[] = [\n      'damping',\n      'mass',\n      'overshootClamping',\n      'restDisplacementThreshold',\n      'restSpeedThreshold',\n      'stiffness',\n      'velocity',\n    ]\n    configKeys.forEach((configKey) => {\n      'worklet'\n      const styleSpecificConfig = transition?.[key]?.[configKey]\n      const transitionConfigForKey = transition?.[configKey]\n\n      if (styleSpecificConfig != null) {\n        config[configKey] = styleSpecificConfig\n      } else if (transitionConfigForKey != null) {\n        config[configKey] = transitionConfigForKey\n      }\n    })\n  } else if (animationType === 'decay') {\n    // TODO decay doesn't work for now\n    console.error(\n      `[${PackageName}]: You passed transition type: decay, but this isn't working for now. Honestly, not sure why yet. Try passing other transition fields, like clamp, velocity, and deceleration. If that solves it, please open an issue and let me know.`\n    )\n    animation = withDecay\n    config = {\n      velocity: 2,\n      deceleration: 2,\n    }\n    const configKeys: (keyof Animated.WithDecayConfig)[] = [\n      'clamp',\n      'velocity',\n      'deceleration',\n    ]\n    configKeys.forEach((configKey) => {\n      'worklet'\n      // is this necessary ^ don't think so...?\n      const styleSpecificConfig = transition?.[key]?.[configKey]\n      const transitionConfigForKey = transition?.[configKey]\n\n      if (styleSpecificConfig != null) {\n        config[configKey] = styleSpecificConfig\n      } else if (transitionConfigForKey != null) {\n        config[configKey] = transitionConfigForKey\n      }\n    })\n  }\n\n  return {\n    animation,\n    config,\n    repeatReverse,\n    repeatCount,\n    shouldRepeat: !!repeatCount,\n  }\n}\n\nexport default function useMapAnimateToStyle<Animate>({\n  animate,\n  from = false,\n  transition: transitionProp,\n  delay: defaultDelay,\n  state,\n  stylePriority = 'animate',\n  onDidAnimate,\n  exit,\n  animateInitialState = false,\n  exitTransition,\n}: MotiProps<Animate>) {\n  const isMounted = useSharedValue(false)\n  const [isPresent, safeToUnmount] = usePresence()\n\n  const reanimatedSafeToUnmount = useCallback(() => {\n    safeToUnmount?.()\n  }, [safeToUnmount])\n\n  const reanimatedOnDidAnimated = useCallback<NonNullable<typeof onDidAnimate>>(\n    (...args) => {\n      onDidAnimate?.(...args)\n    },\n    [onDidAnimate]\n  )\n\n  const hasExitStyle =\n    typeof exit === 'object' && !!Object.keys(exit ?? {}).length\n\n  const style = useAnimatedStyle(() => {\n    const final = {\n      // initializing here fixes reanimated object.__defineProperty bug(?)\n      transform: [] as TransformsStyle['transform'],\n    }\n    const variantStyle: Animate = state?.__state?.value || {}\n\n    const animateStyle = animate || {}\n    const initialStyle = from || {}\n    const exitStyle = exit || {}\n\n    const isExiting = !isPresent && hasExitStyle\n\n    let mergedStyles: Animate = {} as Animate\n    if (stylePriority === 'state') {\n      mergedStyles = Object.assign({}, animateStyle, variantStyle)\n    } else {\n      mergedStyles = Object.assign({}, variantStyle, animateStyle)\n    }\n\n    if (isExiting && exitStyle) {\n      mergedStyles = Object.assign({}, exitStyle) as any\n    }\n\n    debug('here')\n\n    // reduce doesn't work with spreads/reanimated Objects!\n    // const exitingStyleProps: Record<string, boolean> = Object.keys(\n    //   mergedStyles || {}\n    // ).reduce((obj, styleKey) => ({ ...obj, [styleKey]: true }), {})\n\n    // use forEach instead!\n    const exitingStyleProps: Record<string, boolean> = {}\n    Object.keys(exitStyle || {}).forEach((key) => {\n      exitingStyleProps[key] = true\n    })\n\n    let transition = transitionProp\n    if (isExiting && exitTransition) {\n      transition = Object.assign({}, transition, exitTransition)\n    }\n\n    Object.keys(mergedStyles).forEach((key) => {\n      const initialValue = initialStyle[key]\n      const value = mergedStyles[key]\n\n      const {\n        animation,\n        config,\n        shouldRepeat,\n        repeatCount,\n        repeatReverse,\n      } = animationConfig(key, transition)\n\n      const callback: (completed: boolean, value?: any) => void = (\n        completed,\n        recentValue\n      ) => {\n        if (onDidAnimate) {\n          runOnJS(reanimatedOnDidAnimated)(key as any, completed, recentValue, {\n            attempedValue: value,\n          })\n        }\n        if (isExiting) {\n          exitingStyleProps[key] = false\n          const areStylesExiting = Object.values(exitingStyleProps).some(\n            Boolean\n          )\n          // if this is true, then we've finished our exit animations\n          if (!areStylesExiting) {\n            runOnJS(reanimatedSafeToUnmount)()\n          }\n        }\n      }\n\n      if (initialValue != null) {\n        // if we haven't mounted, or if there's no other value to use besides the initial one, use it.\n        if (isMounted.value === false || value == null) {\n          if (isTransform(key) && final.transform) {\n            const transform = {} as Transforms\n            if (isMounted.value || animateInitialState) {\n              transform[key] = animation(initialValue, config)\n            } else {\n              transform[key] = initialValue\n            }\n\n            // final.transform.push({ [key]: initialValue }) does not work!\n            final.transform.push(transform)\n          } else {\n            if (isMounted.value || animateInitialState) {\n              final[key] = animation(initialValue, config)\n            } else {\n              final[key] = initialValue\n            }\n          }\n          return\n        }\n      }\n\n      let { delayMs } = animationDelay(key, transition, defaultDelay)\n\n      if (isColor(key)) {\n        // TODO: FIX THIS\n        // if (__DEV__) {\n        if (\n          typeof value === 'string' &&\n          !value.startsWith('rgb') &&\n          !value.startsWith('#')\n        ) {\n          console.error(\n            `[${PackageName}]: You passed ${key}: ${value}, but not all color values are supported yet in Reanimated 2. ☹️\n\n      Please use an rgb or hex formatted color.`\n          )\n        }\n        // }\n      }\n\n      if (value == null || value === false) {\n        // skip missing values\n        // this is useful if you want to do {opacity: loading && 1}\n        // without this, those values will break I think\n        return\n      }\n      if (Array.isArray(value)) {\n        // we have a sequence\n\n        /**\n         * There is some code duplication in this section and in the ones below.\n         *\n         * However, I prefer this for open source. It makes it easier for collaborators to identify issues without a million wrappers.\n         *\n         * If there's something *obvious* that would benefit from abstraction, we can. But let's keep it simple.\n         */\n\n        const sequence = value\n          .filter((step) => {\n            // remove null, false values to allow for conditional styles\n            if (typeof step === 'object') {\n              return step?.value != null && step?.value !== false\n            }\n            return step != null && step !== false\n          })\n          .map((step) => {\n            let stepDelay = delayMs\n            let stepValue = step\n            let stepConfig = Object.assign({}, config)\n            let stepAnimation = animation\n            if (typeof step === 'object') {\n              // not allowed in Reanimated: { delay, value, ...transition } = step\n              const transition = Object.assign({}, step)\n              delete transition.delay\n              delete transition.value\n\n              const { config: inlineStepConfig, animation } = animationConfig(\n                key,\n                transition\n              )\n\n              stepConfig = Object.assign({}, stepConfig, inlineStepConfig)\n              stepAnimation = animation\n\n              if (step.delay != null) {\n                stepDelay = step.delay\n              }\n              stepValue = step.value\n            }\n\n            const sequenceValue = stepAnimation(stepValue, stepConfig, callback)\n            if (stepDelay != null) {\n              return withDelay(stepDelay, sequenceValue)\n            }\n            return sequenceValue\n          })\n          .filter(Boolean)\n\n        if (isTransform(key)) {\n          // we have a sequence of transforms\n          final['transform'] = final['transform'] || []\n\n          if (sequence.length) {\n            const transform = {}\n\n            transform[key] = withSequence(sequence[0], ...sequence.slice(1))\n\n            // @ts-ignore\n            final['transform'].push(transform)\n          }\n        } else {\n          // we have a normal sequence of items\n          // shadows not supported\n          if (sequence.length) {\n            final[key] = withSequence(sequence[0], ...sequence.slice(1))\n          }\n        }\n      } else if (isTransform(key)) {\n        final['transform'] = final['transform'] || []\n        // const transformKey = Object.keys(transformProp)[0]\n        // const transformValue = transformProp[transformKey]\n\n        if (transition?.[key]?.delay != null) {\n          delayMs = transition?.[key]?.delay\n        }\n\n        const transform = {}\n        let finalValue = animation(value, config, callback)\n        if (shouldRepeat) {\n          finalValue = withRepeat(finalValue, repeatCount, repeatReverse)\n        }\n        if (delayMs != null) {\n          transform[key] = withDelay(delayMs, finalValue)\n        } else {\n          transform[key] = finalValue\n        }\n\n        // @ts-ignore\n        final['transform'].push(transform)\n      } else if (typeof value === 'object') {\n        // shadows\n        final[key] = {}\n        Object.keys(value || {}).forEach((innerStyleKey) => {\n          let finalValue = animation(value, config, callback)\n\n          if (shouldRepeat) {\n            finalValue = withRepeat(finalValue, repeatCount, repeatReverse)\n          }\n\n          if (delayMs != null) {\n            final[key][innerStyleKey] = withDelay(delayMs, finalValue)\n          } else {\n            final[key][innerStyleKey] = finalValue\n          }\n        })\n      } else {\n        let finalValue = animation(value, config, callback)\n        if (shouldRepeat) {\n          finalValue = withRepeat(finalValue, repeatCount, repeatReverse)\n        }\n\n        if (delayMs != null && typeof delayMs === 'number') {\n          final[key] = withDelay(delayMs, finalValue)\n        } else {\n          final[key] = finalValue\n        }\n      }\n    })\n\n    // TODO\n    // if (!final.transform?.length) {\n    //   delete final.transform\n    // }\n\n    return final\n  })\n\n  useEffect(() => {\n    isMounted.value = true\n  }, [isMounted])\n\n  useEffect(\n    function allowUnMountIfMissingExit() {\n      if (!isPresent && !hasExitStyle) {\n        safeToUnmount?.()\n      }\n    },\n    [hasExitStyle, isPresent, safeToUnmount]\n  )\n\n  return {\n    style,\n  }\n}\n"]}